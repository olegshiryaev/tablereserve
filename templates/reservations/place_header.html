{% load custom_filters %}
{% load floattags %}
<div class="place-header">
    <div class="place-info-block">
        <div class="place-info-left">
            <h1>{{ place.type }} {{ place.name }}</h1>
            {% if place.address %}
            <span class="place-address">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="icon">
                    <path d="M12 2C8.13 2 5 5.13 5 9c0 4.25 7 13 7 13s7-8.75 7-13c0-3.87-3.13-7-7-7zm0 10.5c-1.93 0-3.5-1.57-3.5-3.5S10.07 5.5 12 5.5 15.5 7.07 15.5 9 13.93 12.5 12 12.5z"/>
                </svg>
                <a href="https://yandex.ru/maps/?text={{ place.address|urlencode }}" target="_blank" style="text-decoration: none; color: inherit;">{{ place.address }}</a>
            </span>
            {% endif %}
        </div>
        <div class="place-info-right">
            {% if place.phone %}
                <span class="place-phone">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="icon">
                        <path d="M6.62 10.79a15.53 15.53 0 006.59 6.59l2.2-2.2a1.5 1.5 0 011.7-.27c1.2.48 2.5.74 3.84.74a1.5 1.5 0 011.5 1.5v3.75a1.5 1.5 0 01-1.5 1.5A18 18 0 012 4.5a1.5 1.5 0 011.5-1.5H7.25a1.5 1.5 0 011.5 1.5c0 1.34.26 2.63.74 3.84a1.5 1.5 0 01-.27 1.7l-2.2 2.2z"/>
                    </svg>
                    <span class="hidden-phone">{{ place.phone|format_phone_number|slice:":-5" }}XX-XX</span>
                    <a href="tel:{{ place.phone }}" class="full-phone" style="display: none; text-decoration: none; color: inherit;">{{ place.phone|format_phone_number }}</a>
                    <span class="show-phone" onclick="togglePhone()" style="color: #007aff; cursor: pointer;">Показать</span>
                </span>
            {% endif %}
        </div>
    </div>
</div>
<script>
    function togglePhone() {
        const hiddenPhone = document.querySelector('.hidden-phone');
        const fullPhone = document.querySelector('.full-phone');
        const showPhoneText = document.querySelector('.show-phone');
    
        // Скрываем скрытый номер и показываем полный номер
        hiddenPhone.style.display = "none";
        fullPhone.style.display = "inline";
        
        // Убираем текст "Показать"
        showPhoneText.style.display = "none";
    }
</script>