{% if halls.exists %}
<div id="place-halls" class="place-halls-section mt-3 mb-3">
    <div class="place-halls-inner">
        <h2>Столики</h2>
        <div class="halls-grid">
            {% for hall in halls %}
            {% if hall.tables.all %} <!-- Проверяем наличие столиков -->
            <div class="hall-section">
                <h3 class="hall-name">{{ hall.name }}</h3>
                <div class="hall-tables-list">
                    {% for table in hall.tables.all %}
                    <div class="hall-table-row">
                        {% if table.photo %}
                        <img src="{{ table.photo.url }}" alt="{{ table.name }}" class="hall-table-image">
                        {% else %}
                        <div class="hall-table-placeholder">
                            <i class="fas fa-camera"></i> <!-- Иконка фотоаппарата -->
                        </div>
                        {% endif %}
                        <div class="hall-table-info">
                            <h4 class="hall-table-name">Столик</h4>
                            <p class="hall-table-seats">Мест: {{ table.seats }}</p>
                        </div>
                        <a href="#" class="hall-book-button">Забронировать</a>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
    </div>
</div>

<script>
    document.querySelectorAll('.view-tables-button').forEach(button => {
        button.addEventListener('click', function () {
            const hallId = this.dataset.hallId;
            document.getElementById('hall-modal-' + hallId).style.display = 'block';
        });
    });
    
    document.querySelectorAll('.hall-close-button').forEach(button => {
        button.addEventListener('click', function () {
            const hallId = this.dataset.hallId;
            document.getElementById('hall-modal-' + hallId).style.display = 'none';
        });
    });
    
    // Закрытие модального окна при клике вне модального контента
    window.addEventListener('click', function(event) {
        document.querySelectorAll('.hall-modal').forEach(modal => {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        });
    });
    
    // Закрытие модального окна при нажатии на клавишу Esc
    document.addEventListener('keydown', function(event) {
        if (event.key === "Escape") {
            document.querySelectorAll('.hall-modal').forEach(modal => {
                modal.style.display = 'none';
            });
        }
    });    
</script>
{% endif %}
